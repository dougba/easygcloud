function HydrogenPack(e){var t=angular.element("body"),n=angular.element("#ct-dom-tree-2"),a=hydrogen.get("domTreeVersion");function o(e){return!e.$$phase&&(e.$digest(),!0)}function i(e){if("object"==typeof e&&null!==e)return Object.keys(e).length}if(e.isCodeEditorFocused=function(){return null!=document.querySelector(".cm-focused")},hydrogen.get("settings.contextMenu.enabled")){var r=angular.element("#hydrogen-contextual-menu"),c=r.children("[data-command]"),d=0,s=0,l=null;function u(){s=0,l=null,r.hide(),r.css("left",0),r.css("top",0)}function p(t,n){if(e.hydroScope.checkComponent()){e.hydroScope.refreshStatus(navigator),r.show();var a=document.documentElement.clientWidth,o=document.documentElement.clientHeight,i=r.width(),c=r.height(),l=window.scrollX+a-i-2,u=window.scrollY+o-c-2;return r.css({left:Math.min(t,l),top:Math.min(n,u)}),s=d,!0}return!1}e._hpShowFrameMenu=function(t,n){var a=document.getElementById("ct-artificial-viewport").getBoundingClientRect(),o=e.viewportScale;return!!p(Math.ceil(t*o)+a.left,Math.ceil(n*o)+a.top)&&(l="iframe",!0)},e._hpHideFrameMenu=function(){"iframe"==l&&u()},e.$watch("iframeScope.component.active.id",(function(e){d=e,e&&e==s||u()})),n.get(0).addEventListener("contextmenu",(function(t){var n=t.target.closest(".dom-tree-node-label");if(n){var o=angular.element(n).scope().item;if(!o)return;a<4&&(e.iframeScope.activateComponent(o.id,o.name,t),e.scrollToComponent(o.options.selector)),p(t.pageX+1,t.pageY+1)&&(l="ui",t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())}}),!0),n.on("scroll",u),t.on("click contextmenu",u),c.on("click",(function(t){var n=this.dataset.command;if(!n||this.matches(".disabled"))return!1;setTimeout((function(){try{e.hydroScope.executeCommand(n)}catch(t){console.error(t),e.hydroScope.showNotice("Failed to execute the command<br/>"+t)}}))}))}if(hydrogen.get("settings.clipboard.enabled")&&t.on("paste",(function(t){t.target.isContentEditable||document.activeElement.isContentEditable||["INPUT","TEXTAREA"].includes(t.target.nodeName)||e.isCodeEditorFocused()||e.hydroScope&&"function"==typeof e.hydroScope.pasteHandler&&e.hydroScope.pasteHandler.call(this,t)})),hydrogen.get("settings.structureEnhancer.enabled")){(a=hydrogen.get("domTreeVersion"))>="2"?n.on("dblclick",".dom-tree-node-label.ng-scope",(function(e){var t=angular.element(this).scope();t.state.editable=!0,t.$apply();let n=this.querySelector("input.title");n&&(n.focus(),n.select())})):angular.element("#ct-dom-tree").on("dblclick",".ct-dom-tree-name",(function(t){var n=this.getAttribute("ng-attr-node-id");e.iframeScope.setEditableFriendlyName(n)}));var g=parseInt(hydrogen.get("settings.structureEnhancer.width"));g&&hydrogen.onFunction(e,"adjustViewportContainer",(function(){var t=e.adjustViewportContainer;e.adjustViewportContainer=function(){if(e.showSidePanel&&e.isShowTab("sidePanel","DOMTree")){var n=e.verticalSidebar.width(),a=window.innerWidth-g-n;e.viewportContainer.css({marginLeft:n,width:a}),e.adjustArtificialViewport(a-12),e.adjustViewportRuller(),e.sidePanelElement.css({width:g})}else t()};var n=e.switchTab;e.switchTab=function(t,a){n(t,a),"sidePanel"==t&&e.adjustViewportContainer()}})),hydrogen.get("settings.structureEnhancer.openOnLoad")&&hydrogen.onFunction(e,"adjustViewportContainer",(function(){e.switchTab("sidePanel","DOMTree")})),hydrogen.get("settings.structureEnhancer.expandAll")&&e.$on("iframe-init",(function(){var t=setInterval((function(){0==e.overlaysCount&&(clearInterval(t),a>="2"?e.$broadcast("treeExpand"):(e.iframeScope.expandAllNodes(),o(e)))}),100)}))}if(hydrogen.get("settings.preserveAdvancedTabs.enabled")){var f={showAllStyles:!0,styleTabAdvance:!1,sidebarExpanded:!1,advancedTabs:[],effectsTabs:[]},m=["code-php","code-css","code-js","code-mixed"];e.saveAdvancedTabState=function(){f.showAllStyles=e.showAllStyles,f.styleTabAdvance=e.styleTabAdvance,f.sidebarExpanded=!!e.verticalSidebar.data("expanded"),f.advancedTabs=e.tabs.advanced,f.effectsTabs=e.tabs.effects},e.restoreAdvancedTabState=function(){o(e),e.showAllStyles=f.showAllStyles,e.styleTabAdvance=f.styleTabAdvance;var t=e.isActiveName("ct_code_block");if(i(f.advancedTabs)){for(var n in f.advancedTabs)m.includes(n)&&!t&&delete f.advancedTabs[n];i(f.advancedTabs)||(e.showAllStyles=!0)}if(e.tabs.effects=f.effectsTabs,t&&e.$$phase?setTimeout((function(){e.tabs.advanced=f.advancedTabs,o(e)})):e.tabs.advanced=f.advancedTabs,t&&f.sidebarExpanded&&!e.verticalSidebar.data("expanded"))for(var n in m){var a=m[n];if(f.advancedTabs[a]){o(e),e.toggleSidebar();break}}},e.clearAdvancedTabState=function(){e.showAllStyles=!0,e.tabs.advanced=[],e.tabs.effects=[]},e.showAdvancedTab=function(){e.styleTabAdvance&&!e.showAllStyles&&e.clearAdvancedTabState(),e.toggleSidebar(!0),e.styleTabAdvance=!0}}e.hydroInsertCustomSVG=function(){var t=prompt("Please paste the SVG code here to be processed");if(t){var n=angular.element("<div>");try{var a=angular.element(t)}catch(e){throw new Error("Invalid SVG code")}if(a){a.attr("preserveAspectRatio","none"),a.find("[fill]").attr("fill","currentColor"),n.append(a);var o=e.iframeScope.component.active.id;e.iframeScope.component.options[o].model["oxy-shape-divider_custom_shape"]=n.html(),e.iframeScope.setOption(o,"oxy-shape-divider","oxy-shape-divider_custom_shape")}}},hydrogen.get("settings.conditionsEnhancer.enabled")&&e.$watch("dialogForms['ifCondition']",(function(e){e?t.addClass("modal-conditions-open"):t.removeClass("modal-conditions-open")}))}if("object"!=typeof hydrogen&&(hydrogen={}),angular.extend(hydrogen,{get:function(e,t,n){var a;return n=n||this,void 0===(a=e.split(".").filter((function(e){return e})).reduce((function(e,t){return e&&e[t]}),n))&&(a=t),a},onFunction:function(e,t,n){var a=setInterval((function(){"function"==typeof e[t]&&(n.call(),clearInterval(a))}),50)}}),"undefined"!=typeof __rocketLoaderEventCtor&&window.addEventListener("load",(function(){var e=document.getElementById("cf-rocket-loader-notice");e&&(e.style.display="block")})),CTFrontendBuilderUI.directive("hydrogenPack",(function(){return{restrict:"A",link:function(e){window.HydrogenPack=new HydrogenPack(e)}}})),hydrogen.get("settings.structureEnhancer.enabled")){var domTreeVersion=hydrogen.get("domTreeVersion");domTreeVersion>=2&&hydrogen.get("settings.structureEnhancer.icons")&&CTFrontendBuilderUI.directive("domTreeNodeLabel",(function(){return{restrict:"C",link:function(e,t){e.item&&t.find(".oxy-drag-handle").after(`<span data-item-icon="${e.item.name}"></span>`)}}}))}CTFrontendBuilderUI.directive("oxygenOxyShapeDividerOxyShapeDividerCustomShape",(function(){return{restrict:"C",template:function(e){var t=e.find(".oxygen-input");t.addClass("oxygen-input-with-button"),t.append('<div class="oxygen-input-button" ng-click="hydroInsertCustomSVG()">Insert</div>')}}})),hydrogen.get("settings.contentEditorEnhancer.enabled")&&CTFrontendBuilderUI.directive("ctEditButton",(function(){var e,t,n=angular.element("#wp-link-wrap");function a(t){e&&e.isActiveActionTab("contentEditing")&&t.stopPropagation()}return n.on("click",a),angular.element("#wp-link-backdrop").on("click",a),angular.element("#wp-link-submit").on("click",(function(n){if(e&&e.isActiveActionTab("contentEditing")){n.stopPropagation();var a=wpLink.getAttrs(),o=a.href.trim(),i="_blank"==a.target;if(o){var r='<a href="'+o+'"';i&&(r+=' target="_blank"'),r+=">"+(t.getSelection().toString()||o)+"</a>",t.execCommand("insertHTML",!1,r)}else t.execCommand("unlink",!1,""),e.showLinkDataDialog=!1,wpLink.close(),e.$apply();e.$apply()}})),{link:function(a,o,i){"link"===i.ngEditRole&&(void 0===e&&(t=(e=a).artificialViewport[0].contentWindow.document),o.on("mousedown",(function(e){return e.stopImmediatePropagation(),!1})),o.on("click",(function(a){var o=t.getSelection(),i=o.anchorNode.parentNode;if(wpLink.open("hydrogen-link-input"),"A"==i.nodeName&&0==i.classList.length){o.selectAllChildren(i);var r=i.getAttribute("href"),c=i.getAttribute("target");r&&(angular.element("#wp-link-url").val(r),angular.element("#wp-link-target").prop("checked","_blank"==c))}e.showLinkDataDialog=!0,n.removeClass("has-text-field"),a.stopPropagation()})))}}})),hydrogen.get("settings.conditionsEnhancer.enabled")&&(CTFrontendBuilderUI.directive("ctGlobalConditionsChooseOperator",[function(){return{restrict:"C",template:function(e,t){if(!e.hasClass("ct-modal-advanced-query")){var n=angular.element("#tpl-conditions-modal-header").html(),a=e.children(),o=e.find("h1"),i=angular.element('<div class="ct-global-conditions-modal-body"></div>');i.append(a),e.append(o),e.append(i),n&&o.html(n)}}}}]),CTFrontendBuilderUI.directive("oxyConditionMenu",[function(){return{restrict:"C",template:function(e,t){var n=angular.element("#tpl-conditions-clear-button").html();e.find(".oxy-condition-menu-button").eq(0).after(n)}}}])),hydrogen.get("settings.advancedStylesReset.enabled")&&CTFrontendBuilderUI.directive("oxygenSidebarAdvancedSubtab",[function(){var e=angular.element('<a class="hydrogen-section-clear" ng-click=""></a>');return{restrict:"C",template:function(t,n){["background","background-gradient","position","layout","typography","borders","effects","custom-css","custom-js","custom-attributes"].forEach((function(a){if(n.ngClick=="switchTab('advanced', '"+a+"')"){var o=e.clone();o.attr("ng-click","iframeScope.clearTabOptions($event, '"+a+"')"),["background","background-gradient"].includes(a)&&o.attr("ng-class","{'active': iframeScope.component.options[iframeScope.component.active.id]['model']['gradient']}"),"custom-attributes"===a&&o.attr("ng-class","{'active': iframeScope.component.options[iframeScope.component.active.id]['model']['custom-attributes']}"),o.insertAfter(t.children("span"))}}))}}}]),hydrogen.get("settings.classLock.enabled")&&CTFrontendBuilderUI.directive("oxygenClassesDropdown",[function(){return{restrict:"C",template:function(){var e=document.getElementById("tpl-oxygen-classes-dropdown");if(e)return e.innerHTML}}}]),hydrogen.get("settings.preserveAdvancedTabs.enabled")&&CTFrontendBuilderUI.directive("oxygenSidebarTabs",[function(){return{restrict:"C",template:function(e,t){e.children().each((function(){var e=this.getAttribute("ng-click");e&&-1!=e.indexOf("styleTabAdvance=true")&&this.setAttribute("ng-click","showAdvancedTab($event);")}))}}}]);